---
title: "NES Pennsylvania Construction & Industry"
output: 
 flexdashboard::flex_dashboard:
   orientation: columns
   source_code: embed
runtime: shiny
---


```{r context="setup", include=FALSE}
library(shiny)
library(ggplot2)
library(dplyr)
library(tidyr)
library(splines)
library(stringr)
library(RColorBrewer)
library(reshape2)
library(plotly)
library(leaflet)
require(rgdal)
require(leaflet.extras)
require(readxl)

```


```{r data}

## load raw data
#data <- read.csv("nes_selectdata2.csv")
data <- read.csv("/Users/sorme/OneDrive/Documents/GitHub/final_sormehy/nes_trimmed.csv")
#data <- read.csv("~/sormehy_final/nes_trimmed.csv")

## rename columns
colnames(data) <- c("NAICS",
    "Industry.Title",
    "Emp.2018",
    "Emp.2028",
    "Change.Level",
    "Change.Percent",
    "Avg.Annual.Chng")

data$Emp.2018 <- gsub(",", "", data$Emp.2018)
data$Emp.2028 <- gsub(",", "", data$Emp.2028)
data$Change.Level <- gsub(",", "", data$Change.Level)
data$Change.Percent <- gsub("%", "", data$Change.Percent)
data$Avg.Annual.Chng <- gsub(",", "", data$Avg.Annual.Chng)

data$Emp.2018 <- as.numeric(as.character(data$Emp.2018))
data$Emp.2028 <- as.numeric(as.character(data$Emp.2028))
data$Change.Level <- as.numeric(as.character(data$Change.Level))
data$Change.Percent <- as.numeric(as.character(data$Change.Percent))
data$Avg.Annual.Chng <- as.numeric(as.character(data$Avg.Annual.Chng))

#construction <- pa.ind.emp.raw %>%
#  filter(str_detect(NAICS, "^23"))


NAICS.Categories = c("^11", "^21", "^23", "^31", "^32", "^33", "^22", "^42", "^44", "^45", "^48", "^49", "^51", "^52", "^53", "^54", "^55", "^56", "^61",
                     "^62", "^71", "^72", "^81", "^99", "^123")

Employed.by.Year = c("Emp.2018", "Emp.2028")

Changes.in.Employment = c("Change.Level", "Change.Percent", "Avg.Annual.Chng")

```






